{% extends "Tahseal/index.html" %}
{% block title %}
<title>سجل الدفع</title>
{% endblock %}
{% block style %}
.table-bordered td, .table-bordered th{
    vertical-align:middle;
}
{% endblock %}

{% block content %}
<div class="content-container pt-2" style="background-color:#F3F5F2">
    <div class="row">
        <div class="col-10 m-auto text-center">
            <h2 class="h2 text-primary">سجل الدفع</h2>
        </div>
    </div>
    <div class="row mb-5 mt-2">
        <div class="col-7 m-auto text-center">
            <form id="searchForm" action="#" method="POST" class="form border border-info p-2 m-2">
                <label class="h5">البحث من خلال سريال أو اسم العميل</label><br>
                <input id="q" name="q" class="input input-primary" value="{{q}}">
                <a class="btn btn-danger text-white m-1 p-2" id="searchLink">بحث</a>
            </form>
        </div>
    </div>
    <div class="row">
        <table class="col-12 table table-respnsive text-center h4 table-striped table-hover table-bordered text-center" id="#"
        style="text-align:center;direction:rtl;height: 62vh;overflow-y: auto;">
            <thead class="text-center">
                <tr class="bg-secondary text-white text-center" style="font-size:1rem">
                    <th class="">م</th>
                    <th>الاسم</th>
                    <th>تاريخ الدفع المفترض</th>
                    <th>تاريخ الدفع الفعلى</th>
                    <th>رقم التحصيل</th>
                    <th>الدفتر</th>
                    <th>السريال</th>
                    <th>المحصل</th>
                </tr>
            </thead>
            <tbody>
                {% for payRecord in payRecords %}
                <tr>
                    <td>{{forloop.counter}}</td>
                    <td>{{payRecord.client.name}}</td>
                    <td>{{payRecord.ecd}}</td>
                    <td>{{payRecord.created_at_date}}</td>
                    <td>{{payRecord.CollectOrder.id}}</td>
                    <td>{{payRecord.serial}}</td>
                    <td>{{payRecord.receiptNum}}</td>
                    <td>{{payRecord.CollectOrder.collector.name}}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
{% block script %}
    $("#q").keyup(function(){
         let q = $(this).val();
         $("#searchLink").attr('href', `?q=${q}`)
    })
    .click(function(){
        console.log("tstst")
    })
{% endblock %}